================================================================================
LAB 9 ARCHITECTURE: Hugging Face Cloud Deployment
================================================================================

OVERVIEW
--------
Deploys the Streamlit RAG agent to Hugging Face Spaces for public cloud access,
transforming a local application into a scalable, shareable web service.


SYSTEM ARCHITECTURE
-------------------

LOCAL DEVELOPMENT              HUGGING FACE CLOUD
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DEVELOPER       â”‚           â”‚  HUGGING FACE SPACES                 â”‚
â”‚  ENVIRONMENT     â”‚           â”‚                                      â”‚
â”‚                  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   Git     â”‚  â”‚  CONTAINER RUNTIME             â”‚  â”‚
â”‚ â”‚ Source Code  â”‚â”€â”¼â”€â”€Pushâ”€â”€â”€â”€â–ºâ”‚  â”‚  (Docker)                      â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚           â”‚  â”‚                                â”‚  â”‚
â”‚                  â”‚           â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚           â”‚  â”‚  â”‚ Python Environment       â”‚  â”‚  â”‚
â”‚ â”‚requirements  â”‚â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  â”‚  â”‚ - streamlit              â”‚  â”‚  â”‚
â”‚ â”‚.txt          â”‚ â”‚           â”‚  â”‚  â”‚ - langchain-ollama       â”‚  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚           â”‚  â”‚  â”‚ - chromadb               â”‚  â”‚  â”‚
â”‚                  â”‚           â”‚  â”‚  â”‚ - sentence-transformers  â”‚  â”‚  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚           â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚ README.md    â”‚â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  â”‚               â”‚                â”‚  â”‚
â”‚ â”‚ (metadata)   â”‚ â”‚           â”‚  â”‚               â–¼                â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚           â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                  â”‚           â”‚  â”‚  â”‚ streamlit_app.py         â”‚  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚  â”‚ (Application Entry)      â”‚  â”‚  â”‚
                               â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
                               â”‚  â”‚               â”‚                â”‚  â”‚
                               â”‚  â”‚               â–¼                â”‚  â”‚
                               â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
                               â”‚  â”‚  â”‚ RAG Agent Stack          â”‚  â”‚  â”‚
                               â”‚  â”‚  â”‚ - Classification         â”‚  â”‚  â”‚
                               â”‚  â”‚  â”‚ - Vector Search          â”‚  â”‚  â”‚
                               â”‚  â”‚  â”‚ - Memory System          â”‚  â”‚  â”‚
                               â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
                               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                               â”‚                  â”‚                   â”‚
                               â”‚                  â–¼                   â”‚
                               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                               â”‚  â”‚  PERSISTENT STORAGE            â”‚  â”‚
                               â”‚  â”‚  - ChromaDB data               â”‚  â”‚
                               â”‚  â”‚  - Session state               â”‚  â”‚
                               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                               â”‚                  â”‚                   â”‚
                               â”‚                  â–¼                   â”‚
                               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                               â”‚  â”‚  PUBLIC ENDPOINT               â”‚  â”‚
                               â”‚  â”‚  https://huggingface.co/       â”‚  â”‚
                               â”‚  â”‚  spaces/username/rag-agent     â”‚  â”‚
                               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â–²
                                                  â”‚ HTTPS
                                                  â”‚
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚  PUBLIC USERS   â”‚
                                         â”‚  (Web Browsers) â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


DEPLOYMENT WORKFLOW
-------------------

Step 1: Prepare Application
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Test locally                    â”‚
â”‚    $ streamlit run streamlit_app.pyâ”‚
â”‚                                    â”‚
â”‚ 2. Verify all dependencies         â”‚
â”‚    $ pip list                      â”‚
â”‚                                    â”‚
â”‚ 3. Create requirements.txt         â”‚
â”‚    streamlit==1.28.0               â”‚
â”‚    langchain-ollama==0.1.0         â”‚
â”‚    chromadb==0.4.18                â”‚
â”‚    sentence-transformers==2.2.2    â”‚
â”‚    ...                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
Step 2: Create Space on Hugging Face
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Go to huggingface.co/new-space  â”‚
â”‚                                    â”‚
â”‚ 2. Choose:                         â”‚
â”‚    - Name: rag-agent               â”‚
â”‚    - Type: Streamlit               â”‚
â”‚    - Visibility: Public/Private    â”‚
â”‚    - Hardware: CPU basic (free)    â”‚
â”‚                                    â”‚
â”‚ 3. Get Git repository URL          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
Step 3: Push Code to Space
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ $ git clone https://huggingface.coâ”‚
â”‚   /spaces/username/rag-agent       â”‚
â”‚                                    â”‚
â”‚ $ cd rag-agent                     â”‚
â”‚ $ cp streamlit_app.py .            â”‚
â”‚ $ cp requirements.txt .            â”‚
â”‚ $ cp -r memory/ .                  â”‚
â”‚ $ cp -r data/ .                    â”‚
â”‚                                    â”‚
â”‚ $ git add .                        â”‚
â”‚ $ git commit -m "Initial deploy"   â”‚
â”‚ $ git push                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
Step 4: Automatic Build & Deploy
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hugging Face:                      â”‚
â”‚ 1. Detects push                    â”‚
â”‚ 2. Builds Docker container         â”‚
â”‚ 3. Installs dependencies           â”‚
â”‚ 4. Starts Streamlit app            â”‚
â”‚ 5. Assigns public URL              â”‚
â”‚                                    â”‚
â”‚ Status: âœ“ Running                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
Step 5: Public Access
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Application live at:               â”‚
â”‚ https://huggingface.co/spaces/     â”‚
â”‚        username/rag-agent          â”‚
â”‚                                    â”‚
â”‚ Users can:                         â”‚
â”‚ â€¢ Access via browser               â”‚
â”‚ â€¢ No installation needed           â”‚
â”‚ â€¢ Full functionality               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


HUGGING FACE SPACES FILE STRUCTURE
-----------------------------------

Repository Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ rag-agent/                         â”‚
â”‚ â”œâ”€â”€ .git/                          â”‚
â”‚ â”œâ”€â”€ README.md           â† Metadata â”‚
â”‚ â”œâ”€â”€ requirements.txt    â† Deps     â”‚
â”‚ â”œâ”€â”€ streamlit_app.py    â† Entry    â”‚
â”‚ â”œâ”€â”€ app_gradio.py       â† Alt UI   â”‚
â”‚ â”œâ”€â”€ rag_agent2_canonical.py        â”‚
â”‚ â”œâ”€â”€ mcp_server_canonical.py        â”‚
â”‚ â”œâ”€â”€ memory/                        â”‚
â”‚ â”‚   â”œâ”€â”€ __init__.py               â”‚
â”‚ â”‚   â”œâ”€â”€ conversation_memory.py    â”‚
â”‚ â”‚   â””â”€â”€ vector_memory.py          â”‚
â”‚ â”œâ”€â”€ data/                          â”‚
â”‚ â”‚   â””â”€â”€ offices.csv               â”‚
â”‚ â”œâ”€â”€ chroma_db/          â† Persist  â”‚
â”‚ â”‚   â””â”€â”€ (auto-created)            â”‚
â”‚ â””â”€â”€ .gitignore                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


README.md METADATA
------------------

Key Front Matter (YAML):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ---                                                        â”‚
â”‚ title: Intelligent RAG Agent                               â”‚
â”‚ emoji: ğŸ¤–                                                   â”‚
â”‚ colorFrom: blue                                            â”‚
â”‚ colorTo: purple                                            â”‚
â”‚ sdk: streamlit                                             â”‚
â”‚ sdk_version: 1.28.0                                        â”‚
â”‚ app_file: streamlit_app.py                                 â”‚
â”‚ pinned: false                                              â”‚
â”‚ ---                                                        â”‚
â”‚                                                            â”‚
â”‚ # Intelligent RAG Agent                                    â”‚
â”‚                                                            â”‚
â”‚ A conversational AI agent combining:                       â”‚
â”‚ - Query classification                                     â”‚
â”‚ - RAG (Retrieval-Augmented Generation)                     â”‚
â”‚ - Dual memory system (buffer + vector)                     â”‚
â”‚                                                            â”‚
â”‚ ## Features                                                â”‚
â”‚ - Document-grounded Q&A                                    â”‚
â”‚ - Real-time weather lookup                                 â”‚
â”‚ - Context-aware conversations                              â”‚
â”‚ - Memory dashboard                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


HARDWARE OPTIONS
----------------

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hugging Face Spaces Hardware Tiers                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ Tier          CPU    RAM     GPU     Cost/hour    Use Case  â”‚
â”‚ â”€â”€â”€â”€          â”€â”€â”€    â”€â”€â”€     â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                              â”‚
â”‚ CPU Basic     2      16 GB   None    FREE         Dev/Demo  â”‚
â”‚ CPU Upgrade   8      32 GB   None    $0.03        Productionâ”‚
â”‚ T4 Small      4      16 GB   T4      $0.60        LLM Inf.  â”‚
â”‚ A10G Small    4      32 GB   A10G    $1.05        Fast LLM  â”‚
â”‚ A100 Large    12     142 GB  A100    $4.13        Heavy LLM â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Recommended for RAG Agent:
- Development: CPU Basic (FREE)
- Production: CPU Upgrade ($0.03/hour)
- With LLM: T4 Small ($0.60/hour) if running local LLM


ENVIRONMENT ADAPTATIONS
-----------------------

Local vs Cloud Differences:

1. MODEL LOADING
   Local:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ llm = ChatOllama(                  â”‚
   â”‚     model="llama3.2",              â”‚
   â”‚     base_url="http://localhost:    â”‚
   â”‚                11434"              â”‚
   â”‚ )                                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   Cloud (if Ollama not available):
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ from langchain_huggingface import  â”‚
   â”‚     HuggingFaceEndpoint            â”‚
   â”‚                                    â”‚
   â”‚ llm = HuggingFaceEndpoint(         â”‚
   â”‚     repo_id="meta-llama/Llama-2-   â”‚
   â”‚                7b-chat-hf",        â”‚
   â”‚     huggingfacehub_api_token=token â”‚
   â”‚ )                                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. STORAGE PATHS
   Local:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ chroma_client = chromadb.          â”‚
   â”‚     PersistentClient(              â”‚
   â”‚         path="./chroma_db"         â”‚
   â”‚     )                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   Cloud (same, but note persistence):
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ # Files persist in Space storage   â”‚
   â”‚ chroma_client = chromadb.          â”‚
   â”‚     PersistentClient(              â”‚
   â”‚         path="./chroma_db"         â”‚
   â”‚     )                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. SECRETS MANAGEMENT
   Local:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ API_KEY = "sk-..."                 â”‚
   â”‚ # Hardcoded or .env file           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   Cloud:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ import streamlit as st             â”‚
   â”‚ API_KEY = st.secrets["API_KEY"]    â”‚
   â”‚ # Stored in Space settings         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


PERSISTENCE STRATEGY
--------------------

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DATA PERSISTENCE IN HUGGING FACE SPACES                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ Persistent (Survives Rebuilds):                              â”‚
â”‚ âœ“ Files committed to Git                                    â”‚
â”‚ âœ“ ChromaDB data (if in git)                                 â”‚
â”‚ âœ“ Uploaded documents (if in git)                            â”‚
â”‚                                                              â”‚
â”‚ Ephemeral (Lost on Rebuild):                                â”‚
â”‚ âœ— Session state (user sessions)                             â”‚
â”‚ âœ— In-memory data structures                                 â”‚
â”‚ âœ— Temporary files                                            â”‚
â”‚                                                              â”‚
â”‚ Strategies:                                                  â”‚
â”‚ 1. Pre-index documents, commit chroma_db/ to git             â”‚
â”‚ 2. Use external database (Firebase, Supabase) for           â”‚
â”‚    persistent user data                                      â”‚
â”‚ 3. Rebuild index on startup if needed                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STARTUP SCRIPT EXAMPLE
----------------------

streamlit_app.py (Cloud-optimized):

import streamlit as st
import os
from pathlib import Path

# Initialize on first run
if "initialized" not in st.session_state:
    st.session_state.initialized = False

def initialize_app():
    """Initialize app components on first load"""

    # Check if ChromaDB exists
    chroma_path = Path("./chroma_db")

    if not chroma_path.exists():
        st.info("First-time setup: Indexing documents...")

        # Index documents
        from tools.index_csv import index_csv_file
        index_csv_file("data/offices.csv")

        st.success("Indexing complete!")

    # Initialize memories
    st.session_state.buffer_memory = ConversationMemory()
    st.session_state.vector_memory = VectorMemory()

    # Initialize agent
    st.session_state.agent = RAGAgent(...)

    st.session_state.initialized = True

# Run initialization
if not st.session_state.initialized:
    initialize_app()

# Rest of Streamlit app
st.title("ğŸ¤– RAG Agent")
...


MONITORING & LOGS
-----------------

Hugging Face Spaces Dashboard:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Space: username/rag-agent                     Status: Running â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ Metrics:                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Active Users   â”‚  â”‚ Total Requests â”‚  â”‚ Avg Response   â”‚  â”‚
â”‚ â”‚      12        â”‚  â”‚      1,543     â”‚  â”‚     3.2s       â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚ Logs (Live):                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [INFO] Streamlit app started                            â”‚ â”‚
â”‚ â”‚ [INFO] Initializing ChromaDB...                         â”‚ â”‚
â”‚ â”‚ [INFO] Loaded 50 document chunks                        â”‚ â”‚
â”‚ â”‚ [INFO] Agent initialized                                â”‚ â”‚
â”‚ â”‚ [INFO] User query: "What's the weather in Paris?"       â”‚ â”‚
â”‚ â”‚ [INFO] Classification: weather (0.98 confidence)        â”‚ â”‚
â”‚ â”‚ [INFO] Response generated in 3.2s                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚ Actions:                                                     â”‚
â”‚ [Restart Space]  [View Logs]  [Settings]  [Delete]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


USER EXPERIENCE
---------------

Public Access Flow:

1. User visits URL
   https://huggingface.co/spaces/username/rag-agent

2. Space loads in browser
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Loading Space...                   â”‚
   â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 80%                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. Streamlit app appears
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ¤– Intelligent RAG Agent           â”‚
   â”‚                                    â”‚
   â”‚ Chat interface ready               â”‚
   â”‚ Memory: 0/5 exchanges              â”‚
   â”‚                                    â”‚
   â”‚ Type your message...         [Send]â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. User interacts normally
   - Same UI as local
   - Same functionality
   - Isolated session


COST ESTIMATION
---------------

Example: 100 users/day, 10 queries each

Free Tier (CPU Basic):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hardware: FREE                     â”‚
â”‚ Bandwidth: FREE (HF included)      â”‚
â”‚ Storage: FREE (< 50GB)             â”‚
â”‚                                    â”‚
â”‚ Total: $0/month                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Paid Tier (CPU Upgrade for better performance):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hardware: $0.03/hour               â”‚
â”‚ Usage: 24h Ã— 30 days = 720 hours   â”‚
â”‚                                    â”‚
â”‚ Total: $21.60/month                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

With API LLM (HuggingFace Inference):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hardware: FREE (CPU Basic)         â”‚
â”‚ API calls: 1000 queries/day        â”‚
â”‚ Rate: $0.0001/query (example)      â”‚
â”‚                                    â”‚
â”‚ Total: $3/month + hardware         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


COMPARISON: LOCAL VS CLOUD
---------------------------

Aspect              Local (Lab 8)       Cloud (Lab 9)
â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Accessibility       Localhost only      Public URL
Setup               Manual              Automated
Scaling             Single machine      Managed
Persistence         Local storage       Git + storage
Cost                Hardware owned      Usage-based
Sharing             Not possible        Easy (URL)
Maintenance         Self-managed        HF-managed
Uptime              When running        24/7 (if paid)


LIMITATIONS
-----------

- Cold start latency (first load slower)
- CPU tier limits processing speed
- Session state not shared across users
- Rebuild required for code changes
- Storage limited (depends on tier)
- No custom domain on free tier


ALTERNATIVES TO HUGGING FACE
-----------------------------

Platform          Pros                  Cons
â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€                  â”€â”€â”€â”€
Streamlit Cloud   Native Streamlit      Limited free tier
Railway           Easy deploy           Paid only
Render            Good free tier        Complex setup
AWS/GCP/Azure     Full control          High complexity
Heroku            Simple                Paid tiers


KEY LEARNING POINTS
-------------------

1. CLOUD DEPLOYMENT
   - Git-based deployment
   - Container orchestration
   - Public accessibility

2. PLATFORM SERVICES
   - Managed infrastructure
   - Automatic scaling
   - Built-in monitoring

3. PERSISTENCE
   - Git for code + data
   - External DBs for dynamic data
   - Rebuild strategies

4. PRODUCTION READINESS
   - Environment adaptations
   - Secret management
   - Error handling


USE CASES
---------

âœ“ Public AI demos
âœ“ Portfolio projects
âœ“ Research prototypes
âœ“ Startup MVPs
âœ“ Educational tools
âœ“ Client presentations


NEXT STEPS
----------

Enhancements:
â€¢ Add user authentication
â€¢ Implement rate limiting
â€¢ Connect external vector DB
â€¢ Add analytics tracking
â€¢ Custom domain setup
â€¢ Multi-modal inputs (images, audio)

================================================================================
